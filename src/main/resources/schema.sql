create table if not exists users ( id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, username varchar(100), email varchar(100), password varchar(100), CONSTRAINT pk_users PRIMARY KEY (id), CONSTRAINT uq_user_email UNIQUE (email) );

create table if not exists accounts ( id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, balance decimal, description varchar(100), currency varchar, user_id int, CONSTRAINT pk_account PRIMARY KEY (id), CONSTRAINT uq_accounts_description UNIQUE (description), CONSTRAINT acc_owner FOREIGN KEY (user_id) REFERENCES users (id) );

create table if not exists operations ( id BIGINT GENERATED BY DEFAULT AS IDENTITY NOT NULL, description varchar(200), value decimal, type varchar, created timestamp, currency varchar, account_id int, user_id int, CONSTRAINT pk_operations PRIMARY KEY (id), CONSTRAINT op_user FOREIGN KEY (user_id) REFERENCES users (id), CONSTRAINT op_account FOREIGN KEY (account_id) REFERENCES accounts (id) );